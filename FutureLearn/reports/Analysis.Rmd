---
title: "Analysis"
author: "Graham Cole"
date: "20/11/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = normalizePath('..'))
```

```{r load project, include=FALSE}
library(ProjectTemplate)
load.project()  
```

## Analysis of Demographic Information by Archetype Classificiation 

The key components of information pertaining to learner demographic are:

* Gener
* Age
* Education Level 
* Employment Status

For expendiency, I have discounted the following componets from my demographic analysis.  

* Employment Sector 
* Country of Residence 

Using the "enrol_leave_arch" data set, I undertook to investigate each of these areas to identify trends.  

### Age by Arcehtype Class 

``` {r age by archetype, include=TRUE, echo=FALSE}
 #relative proportion age by archetype
arch_age_prop=enrol_leave_arch %>% 
  filter(age_range!="Unknown") %>% 
  group_by(age_range, archetype) %>% 
  summarise(n=n()) %>% 
  mutate(freq=n/sum(n))

#age proportion 
ggplot(data=arch_age_prop)+geom_bar(aes(x=age_range, y=n, fill = factor(arch_age_prop$archetype)),stat = "identity")
```

```{r age percentage, include=FALSE, echo=FALSE}
V46_55=arch_age_prop %>%
  filter(age_range=="46-55", archetype=="Vitalisers")%>% 
  pull(var=-1)
V65=arch_age_prop %>% 
  filter(age_range==">65", archetype=="Vitalisers") %>% 
  pull(var=-1)
E26_35=arch_age_prop %>% 
  filter(age_range=="26-35", archetype=="Explorers") %>% 
  pull(var=-1)
E36_45=arch_age_prop %>% 
  filter(age_range=="36-45", archetype=="Explorers") %>% 
  pull(var=-1)
maxage=arch_age_prop %>% 
  filter(age_range=="46-55") %>% 
  pull(var=-2)

```

Data has been provided for `r sum(arch_age_prop[,3])` learners. 

As shown in the graph above, the majority of learners fall within the 46-55 age range (`r sum(maxage)` learners)  

Vitalisers make up the majority of 46-55 (`r  round(V46_55*100,digits=1)`%) and >65 (`r round(V65*100,digits=1)`%) age ranges.  Explorers are most represented within the 26-35 (`r round(E26_35*100,digits=1)`%) and 36-45 (`r round(E36_45*100,digits=1)`%) age ranges.

## Gender by Archetype Class

```{r gender by arch, inlcude=TRUE, echo=FALSE}

#grouping by archetype and gender 
arch_gender_prop=enrol_leave_arch %>% 
  filter(gender!="Unknown") %>% 
  group_by(archetype, gender) %>% 
  summarise(n=n()) %>% 
  mutate(freq=n/sum(n))

ggplot(data=arch_gender_prop)+geom_bar(aes(x=archetype, y=n, fill = factor(arch_gender_prop$gender)),stat = "identity")
```

```{r inline gender, include=FALSE, echo=FALSE}
#explorers male
E_M=arch_gender_prop %>% 
  filter(gender=="male", archetype=="Explorers") %>% 
  pull(var=4)

#advancers male
A_M=arch_gender_prop %>% 
  filter(gender=="male", archetype=="Advancers") %>% 
  pull(var=4)

#vitalisers female
V_F=arch_gender_prop %>% 
  filter(gender=="female", archetype=="Vitalisers") %>% 
  pull(var=4)

#fixers female
F_F=arch_gender_prop %>% 
  filter(gender=="female", archetype=="Fixers") %>% 
  pull(var=4)

male=arch_gender_prop %>% 
  filter(gender=="male") %>% 
  pull(var=3)
 
female=arch_gender_prop %>% 
  filter(gender=="female") %>% 
  pull(var=3)  

```

Data has been provided for `r sum(arch_gender_prop[,3])' learners. 

The graph above shows that the majority of Advancers (`r round(A_M*100, digits=1)`%) and Explorers (`r round(E_M*100, digits=1)`%) are male where as the majority of Vitalisers (`r round(V_F*100, digits=1)`%) and Fixers (`r round(F_F*100, digits=1)`%) are female. 

The proportion of male to female learners accross the sample data is `r sum(male)`/ `r sum(female)`.

## Employment Status by Archteype Class 

``` {r employment status by arch, include=FALSE, echo=FALSE}
#grouping by archetype and work status 
arch_empl_status=enrol_leave_arch %>% 
  filter(employment_status!="Unknown") %>% 
  group_by(archetype,employment_status) %>% 
  summarise(n=n()) %>% 
  mutate(freq=n/sum(n))
ggplot(data=arch_empl_status)+geom_bar(aes(x=employment_status, y=n, fill = factor(arch_empl_status$archetype)),stat = "identity")
```











